function sortItems(){router.items.sort(),$(".item-list-version").empty(""),router.items.each(function(a){new ListView({model:a})})}var MainRouter=Backbone.Router.extend({routes:{"":"listItems","items/:id":"focusOnItem","search/:searchWord":"showResults"},initialize:function(){this.items=new ItemsCollection},listItems:function(){this.items.fetch()},focusOnItem:function(a){var b=this.items.find(function(b){return b.get("listing_id")==a});new FocusView({model:b})},showResults:function(a){$(".item-list-version").empty(""),this.items.url+=","+a,this.items.fetch()}}),Item=Backbone.Model.extend({}),ItemsCollection=Backbone.Collection.extend({model:Item,url:"https://api.etsy.com/v2/listings/active.js?&api_key=42hmr9rr7q7wvj31sce3ofwt&includes=Images&callback=?&keywords=ceramic,pottery",parse:function(a){return a.results},initialize:function(){this.on("add",function(a){new ListView({model:a})})},comparator:function(a,b){var a=parseFloat(a.get("price")),b=parseFloat(b.get("price"));return a==b?0:a>b?1:-1}}),ListView=Backbone.View.extend({tagName:"a",className:"js-item-list-version item-list-version",createTemplate:_.template($("#list-view-template").text()),initialize:function(){this.setHrefAttr(),$(".js-list-of-items").append(this.el),this.render()},render:function(){this.$el.html(this.createTemplate(this.model))},setHrefAttr:function(){var a=this.model.get("listing_id"),b="#/items/"+a;this.$el.attr({href:b})}}),FocusView=Backbone.View.extend({className:"focus-view",createTemplate:_.template($("#focus-view-template").text()),initialize:function(){$(".js-main-view").html(this.el),this.render()},render:function(){this.$el.html(this.createTemplate(this.model))}}),CompareView=Backbone.View.extend({className:"compare",createTemplate:_.template($("#compare-template").text()),events:{},initialize:function(){var a=$("").val(),b=new ItemsCollection;b.url+=","+a;var c=$("").val(),d=new ItemsCollection;sencondList.url+=","+c;var e=0;b.fetch().then(function(){e+=1}),d.fetch().then(function(){e+=1});var f=setInterval(function(){2===e&&(renderComparison(),clearInterval(f))},50)},render:function(){},renderComparison:function(){}});console.log("manbearpig"),$(document).ready(function(){router=new MainRouter,Backbone.history.start(),$(".sort-by-price").on("click",function(){sortItems()}),$(".js-search-btn").on("click",function(){var a=$(".js-keyword-search").val();window.location.hash="search/"+a,$(".js-keyword-search").val("")})});